{"version":3,"sources":["webpack:///./src/components/chats/assets/typing.vue?547a","webpack:///src/components/chats/assets/typing.vue","webpack:///./src/components/chats/assets/typing.vue?646f","webpack:///./src/components/chats/assets/typing.vue","webpack:///./src/components/events/list/index.sass","webpack:///./src/components/chats/assets/typing.vue?a54c","webpack:///./src/components/events/list/index.sass?6a11","webpack:///./src/components/chat/list/index.vue?b98f","webpack:///./src/components/events/list/index.vue?3abb","webpack:///./src/components/events/list/index.js","webpack:///./src/components/events/list","webpack:///./src/components/events/list/index.vue","webpack:///./src/components/chat/list/index.js","webpack:///./src/components/chat/list","webpack:///./src/components/chat/list/index.vue","webpack:///./src/components/chat/list/index.sass","webpack:///./src/components/chats/assets/typing.vue?1047","webpack:///./src/components/chat/list/index.sass?0e7a","webpack:///./src/components/chats/assets/typing.vue?1da8","webpack:///./src/components/events/list/index.sass?d6d5","webpack:///./src/components/chat/list/index.sass?648f"],"names":["name","props","components","PulseLoader","data","color","size","loading","methods","computed","timeline","Object","events","Array","chat","Boolean","scrollType","error","Error","String","type","tmt","lscroll","menuOpen","c","ls","voiceMessageQueue","provide","addToQueue","message","id","f","_","v","playNext","current","sortedVoiceMessageQueue","findIndex","i","next","setTime","play","watch","a","ios","isios","mapState","auth","state","mobile","scrollbottomshow","scrollTop","eventsByPages","ps","pc","e","push","length","stringifyiedError","stringify","destroyed","core","menu","mounted","showerror","$dialog","alert","okText","backdropClose","catch","dupdated","$emit","dscroll","scroll","ddscroll","emounted","$nextTick","scrollCorrection","s","scrollHeight","clientHeight","$refs","editingEvent","event","text","replyEvent","removeEvent","showPhotoSwipe","index","isOpen","$set","options","hidePhotoSwipe","galleryOpen","scrolldown","scrollToNew","menuIsVisibleHandler","isVisible","mousewheel","preventDefault","deltaY","filterType","encryptedEvents","scrolling","scrollingTo","cancelNextScroll","lastEvent","esize","p_b","p_f","updateTimeout","updateInterval","firstPaginate","init","readAll","active","minimized","lloading","settings_read","dontreadreceipts","eventsTypes","types","toArray","currentState","members","pocketnet","bin","created","setInterval","update","unpaginate","_eventCount","clearInterval","getLiveTimeline","event_id","wh","getEvents","filter","localRedactionEvent","getRedactionEvent","keys","content","users","getMembers","reverse","relations","sortBy","replacingEventDate","getDate","Infinity","uniq","mtrx","clearEventId","makeid","getEventsAndEncrypt","Promise","all","map","pcrypto","resolve","decrypted","pr","subtype","deep","einfo","getAudio","console","msgtype","decryptEvent","then","d","getAudioUnencrypt","ts","_timelineSet","each","rt","getRelationsForEvent","last","getLastReplacement","body","edited","block","mediaTimelineSet","sdk","Filter","client","getUserId","setDefinition","filterId","getOrCreateFilter","credentials","userId","getOrCreateFilteredTimelineSet","getTimelineSet","TimelineWindow","setTimeout","load","r","autoPaginateAll","autoPaginate","direction","needLoad","paginate","rnd","canPaginate","count","Math","max","safespace","readEvent","byme","me","sender","sendReadReceipt","readFirst","readLast","readEvents","readOne","document","hasFocus","hiddenInParent","getJoinedMemberCount","getUnreadNotificationCount","setRoomReadMarkers","roomId","eventId","hidden","scrollE","updatedSize","eventslist","imageGallery"],"mappings":"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","file":"matrix-element.0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"typingBlock\",staticStyle:{\"position\":\"relative\"}},[_c('div',{staticClass:\"typingBlockWrapper\"},[_c('div',[_c('span',[_vm._v(_vm._s(_vm.$t(\"caption.typing\")))])]),_c('div',[_c('PulseLoader',{attrs:{\"color\":_vm.color,\"size\":_vm.size,\"loading\":true}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n  <div style=\"position: relative;\" class=\"typingBlock\">\n    <div class=\"typingBlockWrapper\">\n      <div>\n        <span>{{ $t(\"caption.typing\") }}</span>\n      </div>\n      <div>\n        <PulseLoader  :color=\"color\" :size=\"size\" :loading=\"true\" />\n      </div>\n    </div>\n\n  </div>\n\n\n</template>\n<script>\nimport PulseLoader from 'vue-spinner/src/PulseLoader.vue'\n\n\nexport default {\n  name: 'typing',\n\n  props: {},\n  components: {\n    PulseLoader\n  },\n  data: ()=>{\n    return {\n    color: '#868686',\n    size: '2px',\n    loading:true\n    }\n  },\n  methods: {},\n  computed: {}\n}\n</script>\n<style lang=\"sass\">\n\n  .typingBlock\n    position: relative\n\n    .typingBlockWrapper\n      position: absolute\n      left: 50%\n      transform: translateX(-50%)\n      top: -5px\n      display: flex\n      align-items: center\n\n      >div\n        padding : 0 $r\n\n      span\n        font-size: 0.7em\n        color : srgb(--neutral-grad-3)\n        opacity: 0.8\n    \n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./typing.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./typing.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./typing.vue?vue&type=template&id=26ac9434&\"\nimport script from \"./typing.vue?vue&type=script&lang=js&\"\nexport * from \"./typing.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./typing.vue?vue&type=style&index=0&lang=sass&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  ,true\n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".eventWrapper[data-v-27e149cf] .event{padding:.25em 0}.list-enter-active[data-v-27e149cf],.list-leave-active[data-v-27e149cf]{transition:all 1s}.list-enter[data-v-27e149cf],.list-leave-to[data-v-27e149cf]{opacity:0}#events[data-v-27e149cf]{left:0;right:0;top:0;bottom:0;padding-bottom:46px;position:absolute;transition:.3s}#events.mobile[data-v-27e149cf]{padding-bottom:77px;transform:translate3d(0,calc(var(--keyboardheight, 0)*-1 - -1px),0)}#events.mobile .scrollbottom[data-v-27e149cf]{bottom:5em}.dummyheight[data-v-27e149cf]{height:100%;width:2px;left:0;right:0;top:0;bottom:0;background:rgb(var(--color-shadow-base))}.preloadingWrapper[data-v-27e149cf]{padding:2em;text-align:center;opacity:.5;color:rgb(var(--text-color))}.scrollbottom[data-v-27e149cf]{position:absolute;right:.5em;bottom:4em;cursor:pointer;border-radius:50%;background:rgb(var(--background-main));box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7);color:rgb(var(--color-txt-gray-dark));width:35px;height:35px;line-height:35px;text-align:center;z-index:3}.scrollbottom i[data-v-27e149cf]{font-size:.7em}.eventsflex[data-v-27e149cf]{display:flex;flex-flow:column;overflow-y:overlay;overflow-x:hidden;max-width:640px;margin:0 auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;flex-wrap:nowrap;width:100%;height:100%;scroll-behavior:auto;continue:fragments;justify-content:flex-start;transform:scaleY(-1);contain:strict}.eventsflex.freeze[data-v-27e149cf]{overflow-y:hidden}.eventsflex .eventspage[data-v-27e149cf],.eventsflex .ewr[data-v-27e149cf]{width:100%;display:flex;flex-flow:column;flex-wrap:nowrap;justify-content:flex-start}.eventsflex .errorWrapper[data-v-27e149cf]{padding:.5em}.eventsflex .errorWrapper .btnwrp[data-v-27e149cf]{padding-top:.5em}.eventsflex .errorWrapper .error[data-v-27e149cf]{padding:1em;border-radius:1em;background:rgb(var(--neutral-grad-0))}.eventsflex .errorWrapper[data-v-27e149cf],.eventsflex .eventWrapper[data-v-27e149cf]{width:100%;transform:scaleY(-1)}.eventsflex.mobile[data-v-27e149cf]{scroll-behavior:smooth}.eventsflex.mobile[data-v-27e149cf] .dropdown.visible{top:-55px}.eventsflex.mobile[data-v-27e149cf] .outer-div .backgr,.eventsflex.mobile[data-v-27e149cf] .outer-div .menuwrapper{position:absolute}.eventsflex.mobile.ios.menuOpen[data-v-27e149cf]{overflow:visible}.galleryRow[data-v-27e149cf]{display:flex;align-items:flex-end}.galleryRow .messageImg[data-v-27e149cf]{max-width:50%;margin:0 10px;position:relative}.galleryRow .messageImg .img[data-v-27e149cf]{display:block;border-radius:.5em;position:relative;max-width:100%}.galleryRow .messageImg .loadingImg[data-v-27e149cf]{display:flex;align-items:center;justify-content:center;border-radius:.5em;position:relative;max-width:300px;height:250px}.galleryRow .messageImg .loadingImg .imgPreview[data-v-27e149cf]{border-radius:.5em;position:relative;max-width:100%;height:100%;opacity:.6}.galleryRow .messageImg .loadingImg .clipLoader[data-v-27e149cf]{position:absolute;z-index:9999;left:50%;right:0;top:50%;bottom:0;transform:translate(-50,50);display:flex;align-items:center;justify-content:center}.galleryRow .messageImg .imgMsg img[data-v-27e149cf]{max-width:100%;-o-object-fit:cover;object-fit:cover;border-radius:1em;display:block}.galleryRow .messageImg .metaLink[data-v-27e149cf]{background:#000}.galleryRow .messageImg .metaLink .metaMessageLink .metaTitle[data-v-27e149cf]{font-weight:700;font-size:.9em}.galleryRow .messageImg .metaLink .metaMessageLink .metaDescription[data-v-27e149cf]{margin:.5em 0;font-size:.8em}.galleryRow .messageImg .metaLink .metaMessageLink .metaImgWrapper[data-v-27e149cf]{display:block;max-width:300px;-o-object-fit:cover;object-fit:cover}.galleryRow .messageImg .metaLink .metaMessageLink .metaImgWrapper img[data-v-27e149cf]{display:block;width:100%;height:100%}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./typing.vue?vue&type=style&index=0&lang=sass&\"","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=27e149cf&scoped=true&lang=sass&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'bin' : _vm.pocketnet, 'bout' : !_vm.pocketnet, minimized: _vm.minimized, fix : _vm.pocketnet, active: _vm.active},attrs:{\"id\":\"chatList\"}},[_c('div',{ref:\"work\",staticClass:\"work\"},[_c('div',{ref:\"events\",staticClass:\"timeLineWrapper\"},[(_vm.timeline)?_c('events',{ref:\"eventslist\",attrs:{\"error\":_vm.error,\"timeline\":_vm.timeline,\"events\":_vm.events,\"chat\":_vm.chat,\"loading\":_vm.lloading,\"scrollType\":_vm.scrollType},on:{\"updated\":_vm.updatedSize,\"scroll\":_vm.scrollE,\"removeEvent\":_vm.removeEvent,\"editingEvent\":_vm.editingEvent,\"replyEvent\":_vm.replyEvent,\"galleryEventOpen\":function (e) { return _vm.imageGallery(e); },\"menuIsVisible\":_vm.menuIsVisibleHandler}}):_vm._e()],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"maskedtop\",class:{mobile: _vm.mobile, ios: _vm.ios, menuOpen: _vm.menuOpen, imagesList: (this.scrollType === 'custom' ? 'imagesList' : '')},attrs:{\"id\":\"events\"}},[_c('div',{ref:\"container\",staticClass:\"eventsflex\",class:{mobile: _vm.mobile, ios: _vm.ios, menuOpen: _vm.menuOpen},on:{\"mousewheel\":_vm.mousewheel,\"scroll\":_vm.dscroll}},[_c('div',{staticClass:\"ewr\"},[(_vm.stringifyiedError)?_c('div',{staticClass:\"errorWrapper\"},[_c('div',{staticClass:\"error\"},[_c('div',[_vm._v(_vm._s(_vm.$t(\"sendingerror\")))]),_c('div',{staticClass:\"btnwrp\"},[_c('button',{staticClass:\"button small\",on:{\"click\":_vm.showerror}},[_vm._v(_vm._s(_vm.$t(\"details\")))])])])]):_vm._e(),_vm._l((_vm.events),function(event,i){return _c('div',{key:event.event.event_id,staticClass:\"eventWrapper\"},[_c('eventsEvent',{attrs:{\"event\":event,\"prevevent\":_vm.events[i+1],\"galleryData\":_vm.events,\"chat\":_vm.chat,\"timeline\":_vm.timeline,\"last\":i == 0},on:{\"openImageEvent\":function (e) { return _vm.galleryOpen(e); },\"removeEvent\":function (e) { return _vm.removeEvent(event); },\"editing\":function (text) { return _vm.editingEvent({event: event, text: text}); },\"reply\":function (e) { return _vm.replyEvent({event: event}); },\"mounted\":_vm.emounted,\"menuIsVisible\":_vm.menuIsVisibleHandler}})],1)})],2),(_vm.loading)?_c('div',{staticClass:\"preloadingWrapper\"},[_c('linepreloader')],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.scrollbottomshow),expression:\"scrollbottomshow\"}],staticClass:\"scrollbottom\",on:{\"click\":_vm.scrolldown}},[_c('i',{staticClass:\"fas fa-chevron-down\"})])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { mapState } from \"vuex\";\nimport f from \"@/application/functions\";\nimport * as _ from \"underscore\";\n\nexport default {\n  name: \"events\",\n  props: {\n    timeline: Object,\n    events: Array,\n    chat: Object,\n    loading: Boolean,\n    scrollType: \"\",\n    error: [Object, Error, String],\n  },\n  components: {},\n  data: function () {\n    return {\n      type: \"\",\n      tmt: null,\n      lscroll: null,\n      menuOpen: false,\n      c: 1,\n      ls: 0,\n      voiceMessageQueue: [],\n    };\n  },\n  provide() {\n    return {\n      addToQueue: (message, id) => {\n        var f = _.find(this.voiceMessageQueue, (v) => {\n          return v.id == id\n        })\n\n        if(!f)\n          this.voiceMessageQueue = [...this.voiceMessageQueue, { message, id }];\n      },\n      playNext: (id) => {\n        let current = this.sortedVoiceMessageQueue.findIndex((i) => {\n          return i.id === id;\n        });\n        let next =\n          current === -1 ? null : this.sortedVoiceMessageQueue[current + 1];\n        if (next) {\n          next.message.setTime(0)\n          next.message.play();\n        }\n      },\n    };\n  },\n\n  watch: {\n    events: function () {},\n  },\n\n  computed: {\n    sortedVoiceMessageQueue() {\n      return _.sortBy(this.voiceMessageQueue, (a) => {return a.id})\n    },\n\n    ios() {\n      return f.isios();\n    },\n\n    ...mapState({\n      auth: (state) => state.auth,\n      mobile: (state) => state.mobile,\n      scrollbottomshow: function () {\n        return this.lscroll && this.lscroll.scrollTop > 500;\n      },\n    }),\n\n    eventsByPages: function () {\n      var ps = [];\n      var pc = 0;\n\n      _.each(this.events, function (e) {\n        if (!pc) ps.push([]);\n\n        ps[ps.length - 1].push(e);\n\n        pc++;\n\n        if (pc > 19) pc = 0;\n      });\n\n      return ps;\n    },\n\n    stringifyiedError: function () {\n      return f.stringify(this.error);\n    },\n  },\n  destroyed: function () {\n    this.core.menu(null);\n  },\n  mounted: function () {},\n\n  methods: {\n    showerror: function () {\n      // stringifyiedError\n\n      return this.$dialog\n        .alert(this.stringifyiedError, {\n          okText: \"Ok\",\n          backdropClose: true,\n        })\n        .catch((e) => {});\n    },\n\n    dupdated: _.debounce(function () {\n      this.$emit(\"updated\", this.size());\n    }, 75),\n\n    dscroll: _.debounce(function () {\n      return this.scroll();\n    }, 35),\n\n    ddscroll: function (e) {\n      /*var _ls = this.$refs['container'].scrollTop \n\n            if (Math.abs(_ls - this.ls) > 500 && this.c * _ls < this.c * this.ls){\n            }\n            else{\n                this.ls = _ls\n            }*/\n\n      this.dscroll();\n    },\n\n    emounted: function () {\n      this.$nextTick(function () {\n        this.scrollCorrection();\n        this.dupdated();\n      });\n    },\n    scroll: function () {\n      this.$emit(\"scroll\", this.size());\n    },\n\n    size: function () {\n      var s = {\n        scrollHeight: 0,\n        scrollTop: 0,\n        clientHeight: 0,\n      };\n\n      if (this.$refs[\"container\"]) {\n        s.scrollHeight = this.$refs[\"container\"].scrollHeight;\n        s.scrollTop = this.c * this.$refs[\"container\"].scrollTop;\n        s.clientHeight = this.$refs[\"container\"].clientHeight;\n      }\n\n      this.lscroll = s;\n\n      return s;\n    },\n\n    editingEvent: function ({ event, text }) {\n      this.$emit(\"editingEvent\", { event, text });\n    },\n\n    replyEvent: function ({ event }) {\n      this.$emit(\"replyEvent\", { event });\n    },\n\n    removeEvent: function (event) {\n      this.$emit(\"removeEvent\", event);\n    },\n\n    showPhotoSwipe(index) {\n      this.isOpen = true;\n      this.$set(this.options, \"index\", index);\n    },\n\n    hidePhotoSwipe() {\n      this.isOpen = false;\n    },\n\n    galleryOpen(e) {\n      this.$emit(\"galleryEventOpen\", e);\n    },\n\n    scrolldown() {\n      this.scrollToNew(0);\n    },\n\n    scrollCorrection() {\n      //this.scrollToNew(this.c * this.ls)\n    },\n    scrollToNew(s) {\n      if (this.$refs[\"container\"]) {\n        this.$refs[\"container\"].scrollTop = this.c * s;\n      }\n    },\n\n    menuIsVisibleHandler: function (isVisible) {\n      this.menuOpen = isVisible;\n      this.$emit(\"menuIsVisible\", isVisible);\n    },\n\n    mousewheel: function (e) {\n      if (this.scrollType === \"custom\") {\n        return;\n      } else {\n        e.preventDefault();\n        this.$refs[\"container\"].scrollTop += -e.deltaY;\n        return false;\n      }\n    },\n  },\n};\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=27e149cf&scoped=true&\"\nimport script from \"./index.js?vue&type=script&lang=js&\"\nexport * from \"./index.js?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.sass?vue&type=style&index=0&id=27e149cf&scoped=true&lang=sass&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"27e149cf\",\n  null\n  ,true\n)\n\nexport default component.exports","import {mapState} from 'vuex';\n\nimport events from '@/components/events/list/index.vue'\nimport time from \"../../chats/assets/time\";\nimport f from \"@/application/functions\";\n\nexport default {\n  name: 'chatList',\n  props: {\n    chat: Object,\n    filterType: String,\n    error : [Object, Error, String]\n  },\n\n  components: {\n    events\n  },\n\n  data: function () {\n\n    return {\n      encryptedEvents: [],\n      loading: false,\n      scrolling: false,\n      scrollingTo: 0,\n      cancelNextScroll: false,\n      timeline: null,\n      lastEvent: {},\n      scrollType: String,\n      esize : {},\n      p_b: false,\n      p_f: false,\n\n      updateTimeout: null,\n      updateInterval: null,\n      events: [],\n      firstPaginate: true,\n    }\n\n  },\n\n  mounted: function () {\n\n\n    this.init()\n\n    if (this.chat) {\n      this.readAll()\n    }\n\n  },\n\n  watch: {\n    //$route: 'getdata'\n\n    active : function(){\n\n      if(this.minimized && !this.active){\n        this.scrollToNew(0)\n      }\n\n      if(this.minimized && this.active){\n        this.readAll();\n      }\n\n    }\n  },\n  computed: mapState({\n\n    lloading: function () {\n      return this.loading || this['p_f'] || this['p_b']\n    },\n\n    auth: state => state.auth,\n\n    settings_read : state => !state.dontreadreceipts,\n\n    eventsTypes: function () {\n      var types = {\n        'm.room.message': true,\n        'p.room.encrypt.message': true,\n        'm.room.image': true,\n        'm.room.audio': true,\n        'm.room.file': true,\n        'm.room.member': true,\n        'm.fully_read': true\n      }\n\n      if (_.toArray(this.chat && this.chat.currentState.members || {}).length > 2) {\n        types['m.room.member'] = true\n        types['m.room.power_levels'] = true\n      }\n\n      return types\n    },\n\n    pocketnet: state => state.pocketnet,\n    minimized: state => state.minimized,\n    active: state => state.active,\n\n    bin: function (state) {\n      return state.pocketnet\n    },\n\n\n  }),\n\n  created() {\n    this.updateInterval = setInterval(this.update, 300)\n  },\n  destroyed() {\n\n    if (this.timeline) {\n      this.timeline.unpaginate(this.timeline._eventCount, true)\n    }\n\n    clearInterval(this.updateInterval)\n  },\n\n  methods: {\n    editingEvent: function ({event, text}) {\n      this.$emit('editingEvent', {event, text})\n    },\n    replyEvent: function ({event}) {\n      this.$emit('replyEvent', {event})\n    },\n\n    removeEvent: function (event) {\n      this.chat.getLiveTimeline().removeEvent(event.event.event_id)\n    },\n    wh: function () {\n\n      if (this.esize.clientHeight) return this.esize.clientHeight\n\n    },\n    getEvents: function () {\n      var events = this.timeline.getEvents()\n\n      events = _.filter(events, e => {\n\n        var type = e.event.type;\n\n        if (e.localRedactionEvent() || e.getRedactionEvent()) return\n\n        if (e.event.type === 'm.room.power_levels' && Object.keys(e.event.content.users).length === 1) {\n          return\n        }\n        if (this.chat.currentState.getMembers().length <= 2 && e.event.type === 'm.room.member' && 'm.room.power_levels') {\n          return\n        }\n\n        return !this.eventsTypes || this.eventsTypes[type]\n\n      })\n\n      events = events.reverse()\n\n      this.relations(events)\n\n      events = _.sortBy(events, function (e) {\n        return e.replacingEventDate() || e.getDate() || Infinity\n      })\n\n      events = events.reverse()\n\n      events = _.uniq(events, e => {\n        return this.core.mtrx.clearEventId(e) || f.makeid()\n      })\n\n      events = _.sortBy(events, function (e) {\n        return e.getDate() || Infinity\n      })\n\n\n      events = events.reverse()\n\n      this.$emit('getEvents', events)\n\n      return events\n\n    },\n\n    getEventsAndEncrypt : function(){\n      var events = this.getEvents()\n\n      return Promise.all(_.map(events, (e) => { \n\n\n        if(!this.chat.pcrypto) return Promise.resolve()\n\n\n        if (e.event.decrypted) return Promise.resolve()\n\n\n        var pr = null\n        var subtype = f.deep(e, 'event.content.msgtype')\n\n\n\n        //if(f.deep(e, 'event.content.msgtype') != 'm.encrypted') return Promise.resolve()\n\n        var einfo = f.deep(e, 'event.content.info.secrets') || f.deep(e, 'event.content.pbody.secrets')\n\n        if(einfo) {\n          if(subtype == 'm.image'){\n            \n          }\n\n          if(subtype == 'm.audio'){\n            pr = this.core.mtrx.getAudio(this.chat, e).catch(error => {\n\n              console.error(error)\n\n              e.event.decrypted = {\n                msgtype : 'm.bad.encrypted'\n              }\n\n            })\n          }\n\n          if(subtype == 'm.encrypted'){\n            pr = this.chat.pcrypto.decryptEvent(e.event).then(d => {\n              e.event.decrypted = d\n    \n              return Promise.resolve()\n            }).catch(e => {\n    \n              e.event.decrypted = {\n                msgtype : 'm.bad.encrypted'\n              }\n    \n              return Promise.resolve()\n            })\n          }\n        }\n        else{\n          if(subtype == 'm.audio'){\n            pr = this.core.mtrx.getAudioUnencrypt(this.chat, e)\n          }\n        }\n\n        if(!pr) return Promise.resolve()\n\n        return pr.catch(e => {\n          return Promise.resolve()\n        })\n\n\n        /*return this.chat.pcrypto.decryptEvent(e.event).then(d => {\n          e.event.decrypted = d\n\n          return Promise.resolve()\n        }).catch(e => {\n\n          e.event.decrypted = {\n            msgtype : 'm.bad.encrypted'\n          }\n\n          return Promise.resolve()\n        })*/\n\n      })).then(() => {\n        return Promise.resolve(events)\n      })\n    },\n\n    relations: function (events) {\n\n      var ts = this.timeline._timelineSet\n\n      _.each(events, (e) => {\n\n        try {\n\n\n          //if(!e.event.content.edited){\n          var rt = ts.getRelationsForEvent(e.event.event_id, 'm.replace', 'm.room.message')\n\n          if (rt) {\n            var last = rt.getLastReplacement()\n\n            if (last) {\n              e.event.content.body = last.event.content.body\n              e.event.content.edited = last.event.event_id\n              e.event.content.block = last.event.content.block\n              e.event.content.msgtype = last.event.content.msgtype\n            }\n\n          }\n\n        } catch (e) {\n          console.error(e)\n        }\n\n\n      })\n    },\n    mediaTimelineSet: async function () {\n      var filter = new this.core.mtrx.sdk.Filter(client.getUserId())\n\n      filter.setDefinition({\n        \"room\": {\n          \"timeline\": {\n            \"contains_url\": true,\n            \"types\": [\n              \"m.room.message\",\n            ],\n          },\n        }\n      })\n\n      filter.filterId = await this.core.mtrx.client.getOrCreateFilter(\"FILTER_FILES_\" + this.core.mtrx.client.credentials.userId, filter);\n      \n      return this.chat.getOrCreateFilteredTimelineSet(filter)\n    },\n    init: async function () {\n\n      this.loading = true\n      this.firstPaginate = true\n\n      var timeline = this.chat.getLiveTimeline();\n\n      var ts;\n\n      if (this.filterType === 'images') {\n        this.scrollType = 'custom'\n        ts = await this.mediaTimelineSet()\n\n      } else {\n\n        ts = timeline.getTimelineSet()\n\n      }\n\n      this.timeline = new this.core.mtrx.sdk.TimelineWindow(this.core.mtrx.client, ts)\n\n      setTimeout(() => {\n\n        this.timeline.load(/*null, (this.wh() || 600)*/).then((r) => {\n\n          return this.getEventsAndEncrypt()\n\n        }).then((events) => {\n          this.events = events\n\n          this.loading = false;\n\n          setTimeout(() => {\n\n            this.autoPaginateAll()\n\n          }, 300)\n\n        }).catch(e => {\n          this.loading = false;\n        })\n\n      }, 30)\n\n    },\n\n    autoPaginate: function (direction) {\n\n      if (this.needLoad(direction)) {\n        this.paginate(direction)\n      }\n\n    },\n\n\n    paginate: function (direction, rnd) {\n      //$(this.$el).find('.eventsflex')[0]\n\n      if (!this.loading && this.timeline && !this['p_' + direction]) {\n\n        if (this.timeline.canPaginate(direction) || rnd) {\n\n          this['p_' + direction] = true\n\n          let count = /*this.firstPaginate ? 24 : */20;\n\n          this.timeline.paginate(direction, count).then(e => {\n\n            return Promise.resolve()\n\n          }).catch(e => {\n\n            return Promise.resolve()\n\n          }).then(r => {\n\n            return this.getEventsAndEncrypt()\n\n          }).then(events => {\n            this.events = events;\n\n            this.firstPaginate = false\n\n            this.readAll();\n\n            this['p_' + direction] = false;\n          })\n\n        }\n        else{\n\n            this.readAll();\n          \n        }\n\n      }\n\n    },\n\n    autoPaginateAll: function () {\n      if (this.filterType === 'images') {\n        this.autoPaginate('b')\n      } else {\n        this.autoPaginate('b')\n        this.autoPaginate('f')\n      }\n    },\n\n    needLoad: function (direction) {\n\n      var r = false\n\n      var scrollHeight = this.esize.scrollHeight || 0\n      var scrollTop = this.esize.scrollTop || 0\n      var clientHeight = Math.max(this.esize.clientHeight || 0, 800)\n\n      if (direction == 'b') {\n\n        var safespace = clientHeight\n\n        if (scrollHeight - scrollTop < clientHeight + safespace) r = true\n      } else {\n        if (scrollTop < clientHeight) r = true\n      }\n\n      return r\n\n    },\n\n    readEvent: function (event) {\n\n      var byme = this.core.mtrx.me(event.event.sender)\n\n      if (byme) {\n        return\n      }\n      this.core.mtrx.client.sendReadReceipt(event)\n    },\n\n    readFirst: function () {\n      var events = this.timeline.getEvents();\n\n      this.readEvent(events[0])\n    },\n\n    readLast: function () {\n      var events = this.timeline.getEvents();\n\n      this.readEvent(events[events.length - 1])\n    },\n\n    readEvents: function (events) {\n      _.each(events, (e) => {\n        this.readEvent(e)\n      })\n    },\n    readOne() {\n      this.core.mtrx.client(this.chat.timeline[this.chat.timeline.length - 1]).then(r => {\n        return r\n      })\n    },\n    readAll: function () {\n\n      if(\n        document.hasFocus() &&\n        (!this.pocketnet || (this.active)) &&\n        !this.core.hiddenInParent &&\n        this.chat && this.chat.getJoinedMemberCount() > 0 &&\n        this.chat.getUnreadNotificationCount() !== 0)\n\n        setTimeout(() => {\n\n          if (!this.chat) return\n\n          var i = this.chat.timeline.length - 1\n          var event = null\n\n          while (i >= 0 && !event) {\n\n            var e = this.chat.timeline[i]\n\n            if (!this.core.mtrx.me(e.sender.userId)) {\n              event = e\n            }\n\n            i--\n          }\n\n          if(e){\n            this.core.mtrx.client.setRoomReadMarkers(\n              this.chat.currentState.roomId,\n              e.eventId,\n              e, {\n                hidden : !this.settings_read ? true : false\n              }).then(r => {\n  \n              return r\n            })\n          }\n\n          \n\n        }, 1000)\n\n    },\n\n    //////////////\n\n\n    scrollE: function (size) {\n\n        this.updatedSize(size)\n        this.$emit('scroll', size)\n\n    },\n\n    updatedSize: function (size) {\n      this.esize = size\n    },\n\n    update: function (e) {\n      if (!this.scrolling) {\n        this.autoPaginateAll()\n      } else {\n        // e.preventDefault()\n      }\n    },\n\n\n    scrollToNew: function (s) {\n      this.scrolling = true\n\n      this.$refs.eventslist.scrollToNew(s)\n\n      this.scrolling = false\n\n    },\n\n\n    imageGallery: function (e) {\n      this.$emit('eventImage', e)\n    },\n\n    menuIsVisibleHandler: function (isVisible) {\n      this.$emit('menuIsVisible', isVisible);\n    }\n  },\n}","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=ef061e4a&scoped=true&\"\nimport script from \"./index.js?vue&type=script&lang=js&\"\nexport * from \"./index.js?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.sass?vue&type=style&index=0&id=ef061e4a&scoped=true&lang=sass&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"ef061e4a\",\n  null\n  ,true\n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"[data-v-ef061e4a] .eventMember{text-align:left}[data-v-ef061e4a] .eventMember span{font-size:.9em}.pswp img[data-v-ef061e4a]{max-width:none;-o-object-fit:contain;object-fit:contain}#chatList.minimized:not(.active) .timeLineWrapper[data-v-ef061e4a]{padding-left:.5em}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./typing.vue?vue&type=style&index=0&lang=sass&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"e96d3eb2\", content, shadowRoot)\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=ef061e4a&scoped=true&lang=sass&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"3b601183\", content, shadowRoot)\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".typingBlock{position:relative}.typingBlock .typingBlockWrapper{position:absolute;left:50%;transform:translateX(-50%);top:-5px;display:flex;align-items:center}.typingBlock .typingBlockWrapper>div{padding:0 .5em}.typingBlock .typingBlockWrapper span{font-size:.7em;color:rgb(var(--neutral-grad-3));opacity:.8}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=27e149cf&scoped=true&lang=sass&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"68313033\", content, shadowRoot)\n};","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=ef061e4a&scoped=true&lang=sass&\""],"sourceRoot":""}